<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Pb_codegen_util (ocaml-protoc.Ocaml_protoc_compiler_lib.Pb_codegen_util)</title><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc v2.3.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">ocaml-protoc</a> &#x00BB; <a href="../index.html">Ocaml_protoc_compiler_lib</a> &#x00BB; Pb_codegen_util</nav><header class="odoc-preamble"><h1>Module <code><span>Ocaml_protoc_compiler_lib.Pb_codegen_util</span></code></h1><p>Common utility functions for OCaml code generation</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-sp"><a href="#val-sp" class="anchor"></a><code><span><span class="keyword">val</span> sp : <span><span><span>(<span class="type-var">'a</span>, unit, string)</span> <span class="xref-unresolved">Stdlib</span>.format</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>sp x</code> same as sprintf but prefixed with new line</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-let_decl_of_and"><a href="#val-let_decl_of_and" class="anchor"></a><code><span><span class="keyword">val</span> let_decl_of_and : <span><span><span class="type-var">'a</span> option</span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>let_decl_of_and and_</code> returns the function declaration <code>&quot;let&quot;</code> (when ?and_ is <code>None</code>), <code>&quot;and&quot;</code> otherwise.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-string_of_record_field_type"><a href="#val-string_of_record_field_type" class="anchor"></a><code><span><span class="keyword">val</span> string_of_record_field_type : 
  <span><span class="optlabel">?module_prefix</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Pb_codegen_ocaml_type/index.html#type-record_field_type">Pb_codegen_ocaml_type.record_field_type</a> <span class="arrow">&#45;&gt;</span></span>
  string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-string_of_basic_type"><a href="#val-string_of_basic_type" class="anchor"></a><code><span><span class="keyword">val</span> string_of_basic_type : 
  <span><span class="optlabel">?for_pp</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Pb_codegen_ocaml_type/index.html#type-basic_type">Pb_codegen_ocaml_type.basic_type</a> <span class="arrow">&#45;&gt;</span></span>
  string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-string_of_field_type"><a href="#val-string_of_field_type" class="anchor"></a><code><span><span class="keyword">val</span> string_of_field_type : 
  <span><span class="optlabel">?for_pp</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?module_prefix</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Pb_codegen_ocaml_type/index.html#type-field_type">Pb_codegen_ocaml_type.field_type</a> <span class="arrow">&#45;&gt;</span></span>
  string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-function_name_of_user_defined"><a href="#val-function_name_of_user_defined" class="anchor"></a><code><span><span class="keyword">val</span> function_name_of_user_defined : 
  <span><span class="label">function_prefix</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Pb_codegen_ocaml_type/index.html#type-user_defined_type">Pb_codegen_ocaml_type.user_defined_type</a> <span class="arrow">&#45;&gt;</span></span>
  string</span></code></div><div class="spec-doc"><p><code>function_name_of_user_defined prefix user_defined</code> returns the function name of the form `(module'.'?)&lt;prefix&gt;_(type_name)`.</p><p>This pattern is common since a generated function for a type (encode/decode/to_string) will call the same generated function for each user defined field type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-caml_file_name_of_proto_file_name"><a href="#val-caml_file_name_of_proto_file_name" class="anchor"></a><code><span><span class="keyword">val</span> caml_file_name_of_proto_file_name : <span><span class="label">proto_file_name</span>:string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>caml_file_name_of_proto_file_name filename</code> returns the OCaml file name from the protobuf file name</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mutable_record_name"><a href="#val-mutable_record_name" class="anchor"></a><code><span><span class="keyword">val</span> mutable_record_name : <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>mutable_record_name record_name</code> returns the type name of the `mutable` type name. We use mutable types when decoding for better performance, this function encapsulate the nameing convention for this additional type.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-string_of_payload_kind"><a href="#val-string_of_payload_kind" class="anchor"></a><code><span><span class="keyword">val</span> string_of_payload_kind : 
  <span><span class="optlabel">?capitalize</span>:unit <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Pb_codegen_ocaml_type/index.html#type-payload_kind">Pb_codegen_ocaml_type.payload_kind</a> <span class="arrow">&#45;&gt;</span></span>
  <span>bool <span class="arrow">&#45;&gt;</span></span>
  string</span></code></div><div class="spec-doc"><p><code>string_of_payload_kind ~capitalize:() payload_kind packed</code> will return the string corresponding to the payload kind.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-camel_case_of_label"><a href="#val-camel_case_of_label" class="anchor"></a><code><span><span class="keyword">val</span> camel_case_of_label : <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>this function transforms a `lower_case_like_this` into an camlCaseLikeThis</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-camel_case_of_constructor"><a href="#val-camel_case_of_constructor" class="anchor"></a><code><span><span class="keyword">val</span> camel_case_of_constructor : <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>this function transform an OCaml constructuror `Like_this` into a 'likeThis' case</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-collect_modules_of_types"><a href="#val-collect_modules_of_types" class="anchor"></a><code><span><span class="keyword">val</span> collect_modules_of_types : <span><span><a href="../Pb_codegen_ocaml_type/index.html#type-type_">Pb_codegen_ocaml_type.type_</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span>string list</span></span></code></div><div class="spec-doc"><p><code>collect_modules_of_types ocaml_types</code> return the list of all the modules that the <code>ocaml_types</code> depends on</p></div></div></div></body></html>

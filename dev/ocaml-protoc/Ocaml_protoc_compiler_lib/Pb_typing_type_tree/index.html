<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Pb_typing_type_tree (ocaml-protoc.Ocaml_protoc_compiler_lib.Pb_typing_type_tree)</title><link rel="stylesheet" href="../../../_odoc_support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../_odoc_support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">ocaml-protoc</a> &#x00BB; <a href="../index.html">Ocaml_protoc_compiler_lib</a> &#x00BB; Pb_typing_type_tree</nav><header class="odoc-preamble"><h1>Module <code><span>Ocaml_protoc_compiler_lib.Pb_typing_type_tree</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec module anchored" id="module-Pt"><a href="#module-Pt" class="anchor"></a><code><span><span class="keyword">module</span> Pt</span><span> = <a href="../Pb_parsing_parse_tree/index.html">Pb_parsing_parse_tree</a></span></code></div></div><p>Protobuf typed tree.</p><p>The typetree type is parametrized to allow for 2 phase compilation.</p><div class="odoc-spec"><div class="spec type anchored" id="type-field"><a href="#type-field" class="anchor"></a><code><span><span class="keyword">type</span> <span>('a, 'b) field</span></span><span> = </span><span>{</span></code><ol><li id="type-field.field_parsed" class="def record field anchored"><a href="#type-field.field_parsed" class="anchor"></a><code><span>field_parsed : <span><span class="type-var">'b</span> <a href="../Pb_parsing_parse_tree/index.html#type-field">Pt.field</a></span>;</span></code></li><li id="type-field.field_type" class="def record field anchored"><a href="#type-field.field_type" class="anchor"></a><code><span>field_type : <span><span class="type-var">'a</span> <a href="../Pb_field_type/index.html#type-t">Pb_field_type.t</a></span>;</span></code></li><li id="type-field.field_default" class="def record field anchored"><a href="#type-field.field_default" class="anchor"></a><code><span>field_default : <span><a href="../Pb_option/index.html#type-constant">Pb_option.constant</a> option</span>;</span></code></li><li id="type-field.field_options" class="def record field anchored"><a href="#type-field.field_options" class="anchor"></a><code><span>field_options : <a href="../Pb_option/index.html#type-set">Pb_option.set</a>;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>Field definition.</p><ul><li><code>'a</code> is for <code>unresolved</code> or <code>resolved</code></li><li><code>'b</code> is for <code>field_label</code> to account for both normal and one of fields.</li></ul></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-oneof_field"><a href="#type-oneof_field" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a oneof_field</span></span><span> = <span><span>(<span class="type-var">'a</span>, <a href="../Pb_parsing_parse_tree/index.html#type-oneof_field_label">Pt.oneof_field_label</a>)</span> <a href="#type-field">field</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-message_field"><a href="#type-message_field" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a message_field</span></span><span> = <span><span>(<span class="type-var">'a</span>, <a href="../Pb_parsing_parse_tree/index.html#type-message_field_label">Pt.message_field_label</a>)</span> <a href="#type-field">field</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-map_field"><a href="#type-map_field" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a map_field</span></span><span> = </span><span>{</span></code><ol><li id="type-map_field.map_name" class="def record field anchored"><a href="#type-map_field.map_name" class="anchor"></a><code><span>map_name : string;</span></code></li><li id="type-map_field.map_number" class="def record field anchored"><a href="#type-map_field.map_number" class="anchor"></a><code><span>map_number : int;</span></code></li><li id="type-map_field.map_key_type" class="def record field anchored"><a href="#type-map_field.map_key_type" class="anchor"></a><code><span>map_key_type : <a href="../Pb_field_type/index.html#type-map_key_type">Pb_field_type.map_key_type</a>;</span></code></li><li id="type-map_field.map_value_type" class="def record field anchored"><a href="#type-map_field.map_value_type" class="anchor"></a><code><span>map_value_type : <span><span class="type-var">'a</span> <a href="../Pb_field_type/index.html#type-t">Pb_field_type.t</a></span>;</span></code></li><li id="type-map_field.map_options" class="def record field anchored"><a href="#type-map_field.map_options" class="anchor"></a><code><span>map_options : <a href="../Pb_option/index.html#type-set">Pb_option.set</a>;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>Map definition</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-oneof"><a href="#type-oneof" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a oneof</span></span><span> = </span><span>{</span></code><ol><li id="type-oneof.oneof_name" class="def record field anchored"><a href="#type-oneof.oneof_name" class="anchor"></a><code><span>oneof_name : string;</span></code></li><li id="type-oneof.oneof_fields" class="def record field anchored"><a href="#type-oneof.oneof_fields" class="anchor"></a><code><span>oneof_fields : <span><span><span class="type-var">'a</span> <a href="#type-oneof_field">oneof_field</a></span> list</span>;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>Oneof definition</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-type_scope"><a href="#type-type_scope" class="anchor"></a><code><span><span class="keyword">type</span> type_scope</span><span> = </span><span>{</span></code><ol><li id="type-type_scope.packages" class="def record field anchored"><a href="#type-type_scope.packages" class="anchor"></a><code><span>packages : <span>string list</span>;</span></code></li><li id="type-type_scope.message_names" class="def record field anchored"><a href="#type-type_scope.message_names" class="anchor"></a><code><span>message_names : <span>string list</span>;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>Type scope</p><p>The scope of a type (message or enum) is defined by the package (defined in the top of the proto file as well as the messages above it since a message definition can be nested</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-message_body_content"><a href="#type-message_body_content" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a message_body_content</span></span><span> = </span></code><ol><li id="type-message_body_content.Message_field" class="def variant constructor anchored"><a href="#type-message_body_content.Message_field" class="anchor"></a><code><span>| </span><span><span class="constructor">Message_field</span> <span class="keyword">of</span> <span><span class="type-var">'a</span> <a href="#type-message_field">message_field</a></span></span></code></li><li id="type-message_body_content.Message_oneof_field" class="def variant constructor anchored"><a href="#type-message_body_content.Message_oneof_field" class="anchor"></a><code><span>| </span><span><span class="constructor">Message_oneof_field</span> <span class="keyword">of</span> <span><span class="type-var">'a</span> <a href="#type-oneof">oneof</a></span></span></code></li><li id="type-message_body_content.Message_map_field" class="def variant constructor anchored"><a href="#type-message_body_content.Message_map_field" class="anchor"></a><code><span>| </span><span><span class="constructor">Message_map_field</span> <span class="keyword">of</span> <span><span class="type-var">'a</span> <a href="#type-map_field">map_field</a></span></span></code></li></ol></div><div class="spec-doc"><p>item for the message body</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-message"><a href="#type-message" class="anchor"></a><code><span><span class="keyword">and</span> <span>'a message</span></span><span> = </span><span>{</span></code><ol><li id="type-message.extensions" class="def record field anchored"><a href="#type-message.extensions" class="anchor"></a><code><span>extensions : <span><a href="../Pb_parsing_parse_tree/index.html#type-extension_range">Pt.extension_range</a> list</span>;</span></code></li><li id="type-message.message_options" class="def record field anchored"><a href="#type-message.message_options" class="anchor"></a><code><span>message_options : <a href="../Pb_option/index.html#type-set">Pb_option.set</a>;</span></code></li><li id="type-message.message_name" class="def record field anchored"><a href="#type-message.message_name" class="anchor"></a><code><span>message_name : string;</span></code></li><li id="type-message.message_body" class="def record field anchored"><a href="#type-message.message_body" class="anchor"></a><code><span>message_body : <span><span><span class="type-var">'a</span> <a href="#type-message_body_content">message_body_content</a></span> list</span>;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-enum_value"><a href="#type-enum_value" class="anchor"></a><code><span><span class="keyword">type</span> enum_value</span><span> = </span><span>{</span></code><ol><li id="type-enum_value.enum_value_name" class="def record field anchored"><a href="#type-enum_value.enum_value_name" class="anchor"></a><code><span>enum_value_name : string;</span></code></li><li id="type-enum_value.enum_value_int" class="def record field anchored"><a href="#type-enum_value.enum_value_int" class="anchor"></a><code><span>enum_value_int : int;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-enum"><a href="#type-enum" class="anchor"></a><code><span><span class="keyword">type</span> enum</span><span> = </span><span>{</span></code><ol><li id="type-enum.enum_name" class="def record field anchored"><a href="#type-enum.enum_name" class="anchor"></a><code><span>enum_name : string;</span></code></li><li id="type-enum.enum_values" class="def record field anchored"><a href="#type-enum.enum_values" class="anchor"></a><code><span>enum_values : <span><a href="#type-enum_value">enum_value</a> list</span>;</span></code></li><li id="type-enum.enum_options" class="def record field anchored"><a href="#type-enum.enum_options" class="anchor"></a><code><span>enum_options : <a href="../Pb_option/index.html#type-set">Pb_option.set</a>;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-proto_type_spec"><a href="#type-proto_type_spec" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a proto_type_spec</span></span><span> = </span></code><ol><li id="type-proto_type_spec.Enum" class="def variant constructor anchored"><a href="#type-proto_type_spec.Enum" class="anchor"></a><code><span>| </span><span><span class="constructor">Enum</span> <span class="keyword">of</span> <a href="#type-enum">enum</a></span></code></li><li id="type-proto_type_spec.Message" class="def variant constructor anchored"><a href="#type-proto_type_spec.Message" class="anchor"></a><code><span>| </span><span><span class="constructor">Message</span> <span class="keyword">of</span> <span><span class="type-var">'a</span> <a href="#type-message">message</a></span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-proto_type"><a href="#type-proto_type" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a proto_type</span></span><span> = </span><span>{</span></code><ol><li id="type-proto_type.scope" class="def record field anchored"><a href="#type-proto_type.scope" class="anchor"></a><code><span>scope : <a href="#type-type_scope">type_scope</a>;</span></code></li><li id="type-proto_type.id" class="def record field anchored"><a href="#type-proto_type.id" class="anchor"></a><code><span>id : int;</span></code></li><li id="type-proto_type.file_name" class="def record field anchored"><a href="#type-proto_type.file_name" class="anchor"></a><code><span>file_name : string;</span></code></li><li id="type-proto_type.file_options" class="def record field anchored"><a href="#type-proto_type.file_options" class="anchor"></a><code><span>file_options : <a href="../Pb_option/index.html#type-set">Pb_option.set</a>;</span></code></li><li id="type-proto_type.spec" class="def record field anchored"><a href="#type-proto_type.spec" class="anchor"></a><code><span>spec : <span><span class="type-var">'a</span> <a href="#type-proto_type_spec">proto_type_spec</a></span>;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-proto"><a href="#type-proto" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a proto</span></span><span> = <span><span><span class="type-var">'a</span> <a href="#type-proto_type">proto_type</a></span> list</span></span></code></div></div></div></body></html>
[@@@ocaml.warning "-27-30-39-44"]

type payment_system =
  | Cash 
  | Credit_card 
  | Debit_card 
  | App 

type person_location = {
  lat : float;
  lng : float;
}

type person_id =
  | X of string
  | Y of int32
  | Z of float

and person = {
  id : int64;
  email : string;
  name : string;
  home : person_location option;
  picture : bytes;
  id : person_id option;
}

type destructured_options = unit

let rec default_payment_system () = (Cash:payment_system)

let rec default_person_location 
  ?lat:((lat:float) = 0.)
  ?lng:((lng:float) = 0.)
  () : person_location  = {
  lat;
  lng;
}

let rec default_person_id () : person_id = X ("")

and default_person 
  ?id:((id:int64) = 0L)
  ?email:((email:string) = "")
  ?name:((name:string) = "")
  ?home:((home:person_location option) = None)
  ?picture:((picture:bytes) = Bytes.create 0)
  ?id:((id:person_id option) = None)
  () : person  = {
  id;
  email;
  name;
  home;
  picture;
  id;
}

let rec default_destructured_options = ()

[@@@ocaml.warning "-27-30-39"]

(** {2 Dump of internal representation for generated OCaml types} *)

(* ----------------------------------------------------- *)
(*
  Module Prefix: Option_processing
  Const Variant: payment_system
    Constructor: Cash
      Binary Value: 0, String Value: CASH
      Options: [{
   "(label)": "Cash"
   }]
    Constructor: Credit_card
      Binary Value: 1, String Value: CREDIT_CARD
      Options: [{
   "(label)": "Credit Card"
   }]
    Constructor: Debit_card
      Binary Value: 2, String Value: DEBIT_CARD
      Options: [{
   "(label)": "Debit Card"
   }]
    Constructor: App
      Binary Value: 3, String Value: APP
      Options: [{
   "(label)": "Mobile App"
   }]
  Options: [{
   "(label)": "Payment method"
   }]
*)

(* ----------------------------------------------------- *)
(*
  Module Prefix: Option_processing
  Record: person_location
  - Field: lat
    Rft_nolabel (Field Type: Ft_basic_type: Bt_float, Encoding: 1, Payload Kind: Pk_bits64)
    Field options: [{
   "(validate.rules)": {"double": {"gte": -90,
                                   "lte": 90}}
   }]
  - Field: lng
    Rft_nolabel (Field Type: Ft_basic_type: Bt_float, Encoding: 2, Payload Kind: Pk_bits64)
    Field options: [{
   "(validate.rules)": {"double": {"gte": -180,
                                   "lte": 180}}
   }]
  Options: []
*)

(* ----------------------------------------------------- *)
(*
  Module Prefix: Option_processing
  Variant: person_id
    Constructor: X
      Field Type: Vct_non_nullary_constructor: Ft_basic_type: Bt_string

      Encoding Number: 6, Payload Kind: Pk_bytes
      Options: [{
   "(validate.rules)": {"string": {"prefix": "foo"}}
   }]
    Constructor: Y
      Field Type: Vct_non_nullary_constructor: Ft_basic_type: Bt_int32

      Encoding Number: 7, Payload Kind: Pk_varint (zigzag: false)
      Options: [{
   "(validate.rules)": {"int32": {"gt": 0}}
   }]
    Constructor: Z
      Field Type: Vct_non_nullary_constructor: Ft_basic_type: Bt_float

      Encoding Number: 8, Payload Kind: Pk_bits32
      Options: []
  Options: []
*)

(*
  Module Prefix: Option_processing
  Record: person
  - Field: id
    Rft_nolabel (Field Type: Ft_basic_type: Bt_int64, Encoding: 1, Payload Kind: Pk_varint (zigzag: false))
    Field options: [{
   "(validate.rules)": {"uint64": {"gt": 999}}
   }]
  - Field: email
    Rft_nolabel (Field Type: Ft_basic_type: Bt_string, Encoding: 2, Payload Kind: Pk_bytes)
    Field options: [{
   "(validate.rules)": {"string": {"email": true}}
   }]
  - Field: name
    Rft_nolabel (Field Type: Ft_basic_type: Bt_string, Encoding: 3, Payload Kind: Pk_bytes)
    Field options: [{
   "(validate.rules)": {"string": {"pattern": "^[^[0-9]A-Za-z]+( [^[0-9]A-Za-z]+)*$",
                                   "max_bytes": 256}}
   }]
  - Field: home
    Rft_optional (Field Type: Ft_user_defined_type: person_location, Encoding: 4, Payload Kind: Pk_bytes, Default Value: None)
    Field options: [{
   "(validate.rules)": {"message": {"required": true}}
   }]
  - Field: picture
    Rft_nolabel (Field Type: Ft_basic_type: Bt_bytes, Encoding: 5, Payload Kind: Pk_bytes)
    Field options: [{
   "(validate.rules)": {"bytes": {"not_in": ["foo",
                                             "bar",
                                             "baz"]}}
   }]
  - Field: id
    Rft_variant: person_id
    Field options: [{
   "(validate.required)": true
   }]
  Options: [{
   "(validate.disabled)": true
   }]
*)

(* ----------------------------------------------------- *)
(*
  Module Prefix: Option_processing
  Empty Record: destructured_options
  Options: [{
   "(google.api.http)": {"custom": {"path": "/foo/bar/baz/{id}",
                                    "kind": "FETCH"},
                         "additional_bindings": [{"post": "/foo/bar/baz/",
                                                  "body": "*"},
                                                 {"get": "/foo/bar/baz/{id}"}]}
   }]
*)
